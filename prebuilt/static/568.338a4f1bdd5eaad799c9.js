"use strict";(self.webpackChunkkekule_clj=self.webpackChunkkekule_clj||[]).push([[568,13],{1568:(e,t,i)=>{i.r(t),i.d(t,{KekuleComposerModel:()=>o.KekuleComposerModel,KekuleComposerView:()=>o.KekuleComposerView,KekuleDiagramModel:()=>o.KekuleDiagramModel,KekuleDiagramView:()=>o.KekuleDiagramView,KekuleView:()=>o.KekuleView,MODULE_NAME:()=>n.o,MODULE_VERSION:()=>n.Y});var n=i(8657),o=i(5592)},8657:(e,t,i)=>{i.d(t,{Y:()=>o,o:()=>s});const n=i(4147),o=n.version,s=n.name},5592:(e,t,i)=>{i.r(t),i.d(t,{KekuleComposerModel:()=>w,KekuleComposerView:()=>W,KekuleDiagramModel:()=>j,KekuleDiagramView:()=>D,KekuleView:()=>K});var n=i(5651),o=i(8657),s=i(3379),a=i.n(s),l=i(7795),r=i.n(l),u=i(569),d=i.n(u),c=i(3565),h=i.n(c),m=i(9216),p=i.n(m),k=i(4589),g=i.n(k),_=i(3889),b={};b.styleTagTransform=g(),b.setAttributes=h(),b.insert=d().bind(null,"head"),b.domAPI=r(),b.insertStyleElement=p(),a()(_.Z,b),_.Z&&_.Z.locals&&_.Z.locals;var f=i(7020);function y(e){var t=e.getObjectsContainerBox(e.getChemSpace().getChildren()),i=e.getVisibleClientScreenBox();if(t&&i){var n=(i.x2-i.x1)/(t.x2-t.x1),o=(i.y2-i.y1)/(t.y2-t.y1);e.setZoom(Math.max(e.getCurrZoom()*Math.min(n,o)-.25,1)),e.scrollClientToObject(e.getChemSpace().getChildren())}}String.prototype.toJSON=void 0,f.Kekule.Atom.prototype.defineProp("annotation",{dataType:"string",serializable:!0}),f.Kekule.Molecule.prototype.defineProp("annotation",{dataType:"string",serializable:!0});var C=f.Kekule.Class.create(f.Kekule.Editor.ActionOnEditor,{CLASS_NAME:"Fit",HTML_CLASSNAME:"K-Chem-ResetZoom",doExecute:function(){y(this.getEditor())},hint:"Fit"});f.Kekule.ActionManager.registerNamedActionClass("fit",C,f.Kekule.Editor.ChemSpaceEditor),f.Kekule.Editor.Composer.prototype.getZoomButtonNames=function(){return[f.Kekule.ChemWidget.ComponentWidgetNames.zoomIn,f.Kekule.ChemWidget.ComponentWidgetNames.zoomOut,f.Kekule.ChemWidget.ComponentWidgetNames.reset,f.Kekule.ChemWidget.ComponentWidgetNames.resetZoom,"fit"]};class v extends n.DOMWidgetModel{defaults(){return{...super.defaults(),data:null,format_id:"mol",_model_module:o.o,_model_module_version:o.Y,_view_module:o.o,_view_module_version:o.Y}}}class K extends n.DOMWidgetView{constructor(){super(...arguments),this.in_sendData=!1}initialize(e){super.initialize(e),this.model.on("msg:custom",this.handle_custom_message.bind(this)),this.model.on("change:data",this.loadData.bind(this),this),this.model.on("change:format_id",(()=>this.sendData(null)),this)}handle_custom_message(e){if(this.kekule_obj)switch(e.do){case"fit":this.fit();break;case"load_data":this.loadFromData(e.data,e.format_id);break;case"load_file":f.Kekule.IO.loadFileData(e.file);break;case"load_url":f.Kekule.IO.loadUrlData(e.url)}}fit(){}loadFromData(e,t){let i=null;e&&(i=f.Kekule.IO.loadFormatData("Kekule-JSON"===t&&"string"!=typeof e?JSON.stringify(e):e,t)),this.kekule_obj.setChemObj(i||null)}loadData(){this.kekule_obj&&!this.in_sendData&&this.loadFromData(this.model.get("data"),this.model.get("format_id"))}sendData(e){try{e||(e=this.kekule_obj.getChemObj());let t=this.model.get("format_id"),i=f.Kekule.IO.ChemDataWriterManager.getWriterByFormat(t,null,e);if(i){this.in_sendData=!0;let n=i.writeData(e,"Kekule-JSON"===t?f.Kekule.IO.ChemDataType.JSON:f.Kekule.IO.ChemDataType.TEXT,t);this.model.set("data",n),this.model.save_changes(),this.in_sendData=!1}}catch(e){}}on_editing_done(e){this.sendData(e.obj)}render(){super.render(),this.el.classList.add("kekule-widget"),this.kekule_container=document.createElement("div"),this.kekule_container.classList.add("kekule-container"),this.el.appendChild(this.kekule_container)}resize(){let e=this.el.clientWidth-this.kekule_container.style.paddingLeft-this.kekule_container.style.paddingRight-this.kekule_container.style.borderLeft-this.kekule_container.style.borderRight-this.kekule_container.style.marginLeft-this.kekule_container.style.marginRight,t=this.el.clientHeight-this.kekule_container.style.paddingTop-this.kekule_container.style.paddingBottom-this.kekule_container.style.borderTop-this.kekule_container.style.borderBottom-this.kekule_container.style.marginTop-this.kekule_container.style.marginBottom;this.kekule_obj.setDimension(e,t)}load_kekule_obj(){this.resize(),this.loadData()}processLuminoMessage(e){super.processLuminoMessage(e),"resize"!==e.type&&"after-show"!==e.type||!this.kekule_obj||this.resize()}}class j extends v{defaults(){return{...super.defaults(),enable_toolbar:!1,enable_direct_interaction:!0,enable_edit:!0,tool_buttons:["loadData","saveData","molDisplayType","molHideHydrogens","zoomIn","zoomOut","rotateLeft","rotateRight","rotateX","rotateY","rotateZ","reset","openEditor","config"],resizable:!1,_model_name:"KekuleDiagramModel",_view_name:"KekuleDiagramView"}}}class D extends K{initialize(e){super.initialize(e),this.model.on("change:enable_toolbar",this.set_enable_toolbar.bind(this),this),this.model.on("change:enable_direct_interaction",this.set_enable_direct_interaction.bind(this),this),this.model.on("change:enable_edit",this.set_enable_edit.bind(this),this),this.model.on("change:tool_buttons",this.set_tool_buttons.bind(this),this),this.model.on("change:resizable",this.set_resizable.bind(this),this)}set_enable_toolbar(){this.kekule_obj&&this.kekule_obj.setEnableToolbar(this.model.get("enable_toolbar"))}set_enable_direct_interaction(){this.kekule_obj&&this.kekule_obj.setEnableDirectInteraction(this.model.get("enable_direct_interaction"))}set_enable_edit(){this.kekule_obj&&this.kekule_obj.setEnableEdit(this.model.get("enable_edit"))}set_tool_buttons(){this.kekule_obj&&this.kekule_obj.setToolButtons(this.model.get("tool_buttons"))}set_resizable(){this.kekule_obj&&this.kekule_obj.setResizable(this.model.get("resizable"))}render(){super.render(),this.displayed.then((()=>{this.kekule_obj=new f.Kekule.ChemWidget.Viewer(this.kekule_container),this.kekule_obj.addEventListener("editingDone",this.on_editing_done.bind(this)),this.set_enable_toolbar(),this.set_enable_direct_interaction(),this.set_enable_edit(),this.set_tool_buttons(),this.set_resizable(),this.load_kekule_obj()}))}}class w extends v{defaults(){return{...super.defaults(),_model_name:"KekuleComposerModel",_view_name:"KekuleComposerView"}}}class W extends K{constructor(){super(...arguments),this.timeout=null}initialize(e){super.initialize(e)}fit(){y(this.kekule_obj.getEditor())}render(){super.render(),this.displayed.then((()=>{this.kekule_obj=new f.Kekule.Editor.Composer(this.kekule_container),this.kekule_obj.setPredefinedSetting("fullFunc"),this.kekule_obj.setCommonToolButtons([f.Kekule.ChemWidget.ComponentWidgetNames.newDoc,f.Kekule.ChemWidget.ComponentWidgetNames.loadData,f.Kekule.ChemWidget.ComponentWidgetNames.saveData,f.Kekule.ChemWidget.ComponentWidgetNames.undo,f.Kekule.ChemWidget.ComponentWidgetNames.redo,f.Kekule.ChemWidget.ComponentWidgetNames.copy,f.Kekule.ChemWidget.ComponentWidgetNames.cut,f.Kekule.ChemWidget.ComponentWidgetNames.paste,f.Kekule.ChemWidget.ComponentWidgetNames.zoomIn,f.Kekule.ChemWidget.ComponentWidgetNames.zoomOut,"fit",f.Kekule.ChemWidget.ComponentWidgetNames.config,f.Kekule.ChemWidget.ComponentWidgetNames.objInspector]),this.kekule_obj.addEventListener("editObjsChanged",(()=>(this.timeout||(this.timeout=setTimeout((()=>{this.sendData(null),this.timeout=null}),1e3)),!0)),this),this.load_kekule_obj()}))}}},3889:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(8081),o=i.n(n),s=i(3645),a=i.n(s)()(o());a.push([e.id,".kekule-container {\n    position: absolute !important;\n    x: 0;\n    y: 0;\n}\n\n.kekule-widget {\n    width: 100%;\n    height: 400px;\n    position: relative;\n    overflow: hidden;\n}\n\n",""]);const l=a},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var l=0;l<this.length;l++){var r=this[l][0];null!=r&&(a[r]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);n&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},8081:e=>{e.exports=function(e){return e[1]}},3379:e=>{var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var s={},a=[],l=0;l<e.length;l++){var r=e[l],u=n.base?r[0]+n.base:r[0],d=s[u]||0,c="".concat(u," ").concat(d);s[u]=d+1;var h=i(c),m={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};if(-1!==h)t[h].references++,t[h].updater(m);else{var p=o(m,n);n.byIndex=l,t.splice(l,0,{identifier:c,updater:p,references:1})}a.push(c)}return a}function o(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,o){var s=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var l=i(s[a]);t[l].references--}for(var r=n(e,o),u=0;u<s.length;u++){var d=i(s[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=r}}},569:e=>{var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,o&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4147:e=>{e.exports=JSON.parse('{"name":"kekule-clj","version":"0.7.0","description":"A Kekule widget for Common Lisp Jupyter","keywords":["kekule","jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**","css/**","LICENSE.md"],"homepage":"https://github.com/yitzchak/kekule-clj","bugs":{"url":"https://github.com/yitzchak/kekule-clj/issues"},"license":"MIT","author":{"name":"Tarn W. Burton","email":"twburton@gmail.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/yitzchak/kekule-clj#no-cursors"},"scripts":{"build":"tsc && jupyter-labextension build","lint":"eslint . --ext .ts --fix","lint-check":"eslint . --ext .ts","prepack":"yarn run build"},"dependencies":{"@jupyter-widgets/base":"^6.0.1","kekule":"https://github.com/yitzchak/Kekule.js.git"},"devDependencies":{"@lumino/application":"^2.1.1","@lumino/widgets":"^2.1.1","@jupyterlab/builder":"^4.0.1","@types/node":"^20.2.5","@types/resize-observer-browser":"^0.1.7","@typescript-eslint/eslint-plugin":"^5.27.0","@typescript-eslint/parser":"^5.27.0","eslint":"^8.16.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^6.0.0","eslint-plugin-standard":"^5.0.0","lint-staged":"^13.0.3","typescript":"^5.1.3"},"jupyterlab":{"extension":"lib/plugin","outputDir":"prebuilt"},"lint-staged":{"*.ts":["eslint . --ext .ts --fix"]},"prettier":{"singleQuote":true}}')}}]);